---
title: API Reference
description: Complete function documentation for sentinel
author: zoobzio
published: 2025-12-30
updated: 2025-12-30
tags:
  - Reference
  - API
---

# API Reference

## Core Functions

### Inspect

```go
func Inspect[T any]() Metadata
```

Extracts metadata for a single type. Results are cached permanently.

**Panics** if `T` is not a struct type.

```go
metadata := sentinel.Inspect[User]()
```

### Scan

```go
func Scan[T any]() Metadata
```

Recursively extracts metadata for a type and all related types within the same module.

**Panics** if `T` is not a struct type.

```go
metadata := sentinel.Scan[User]()
// User and all related types (Profile, Order, etc.) are now cached
```

### Tag

```go
func Tag(tagName string)
```

Registers a custom struct tag for extraction. Call before `Inspect` or `Scan`.

```go
sentinel.Tag("graphql")
sentinel.Tag("proto")
```

### Browse

```go
func Browse() []string
```

Returns all cached type FQDNs.

```go
fqdns := sentinel.Browse()
// ["github.com/you/app/models.User", "github.com/you/app/models.Profile"]
```

### Lookup

```go
func Lookup(fqdn string) (Metadata, bool)
```

Retrieves cached metadata by FQDN.

```go
meta, ok := sentinel.Lookup("github.com/you/app/models.User")
if ok {
    // Use meta
}

// Or use the FQDN from previously inspected metadata
userMeta := sentinel.Inspect[User]()
meta, ok = sentinel.Lookup(userMeta.FQDN)
```

### Schema

```go
func Schema() map[string]Metadata
```

Returns all cached metadata as a map, keyed by FQDN.

```go
schema := sentinel.Schema()
for fqdn, meta := range schema {
    fmt.Printf("%s: %d fields\n", fqdn, len(meta.Fields))
}
```

## Relationship Functions

### GetRelationships

```go
func GetRelationships[T any]() []TypeRelationship
```

Returns all types that `T` references.

```go
rels := sentinel.GetRelationships[User]()
// [{From: "github.com/.../models.User", To: "github.com/.../models.Profile", Kind: "reference", ...}]
```

### GetReferencedBy

```go
func GetReferencedBy[T any]() []TypeRelationship
```

Returns all types that reference `T`. Requires prior caching of those types.

```go
refs := sentinel.GetReferencedBy[Profile]()
// [{From: "github.com/.../models.User", To: "github.com/.../models.Profile", Kind: "reference", ...}]
```


## Types

### Metadata

```go
type Metadata struct {
    ReflectType   reflect.Type       `json:"-"`
    FQDN          string             `json:"fqdn"`
    TypeName      string             `json:"type_name"`
    PackageName   string             `json:"package_name"`
    Fields        []FieldMetadata    `json:"fields"`
    Relationships []TypeRelationship `json:"relationships,omitempty"`
}
```

### FieldMetadata

```go
type FieldMetadata struct {
    ReflectType reflect.Type      `json:"-"`
    Tags        map[string]string `json:"tags,omitempty"`
    Name        string            `json:"name"`
    Type        string            `json:"type"`
    Kind        FieldKind         `json:"kind"`
    Index       []int             `json:"index"`
}
```

### TypeRelationship

```go
type TypeRelationship struct {
    From      string `json:"from"`       // Source type FQDN
    To        string `json:"to"`         // Target type FQDN
    Field     string `json:"field"`      // Field creating the relationship
    Kind      string `json:"kind"`       // "reference", "collection", "embedding", "map"
    ToPackage string `json:"to_package"` // Target type's package path
}
```

## Relationship Kinds

| Kind | Description | Example |
|------|-------------|---------|
| `reference` | Direct struct or pointer | `Profile *Profile` |
| `collection` | Slice or array | `Orders []Order` |
| `embedding` | Anonymous field | `BaseModel` |
| `map` | Map with struct values | `Items map[string]Item` |
