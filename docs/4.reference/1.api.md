---
title: API Reference
description: Complete function documentation for sentinel
author: zoobzio
published: 2025-12-30
updated: 2025-12-30
readtime: 3 mins
tags:
  - Reference
  - API
---

# API Reference

## Errors

### ErrNotStruct

```go
var ErrNotStruct = errors.New("sentinel: only struct types are supported")
```

Returned by `TryInspect` and `TryScan` when the type parameter is not a struct type.

## Core Functions

### Inspect

```go
func Inspect[T any]() Metadata
```

Extracts metadata for a single type. Results are cached permanently.

**Panics** if `T` is not a struct type.

> [!TIP]
> Pointer-to-struct types are automatically dereferenced. `Inspect[*User]()` is equivalent to `Inspect[User]()`.

```go
metadata := sentinel.Inspect[User]()
```

### TryInspect

```go
func TryInspect[T any]() (Metadata, error)
```

Like `Inspect`, but returns an error instead of panicking if `T` is not a struct type.

```go
metadata, err := sentinel.TryInspect[MyType]()
if err != nil {
    // Handle non-struct type
}
```

### Scan

```go
func Scan[T any]() Metadata
```

Recursively extracts metadata for a type and all related types within the same module.

**Panics** if `T` is not a struct type.

> [!TIP]
> Pointer-to-struct types are automatically dereferenced. `Scan[*User]()` is equivalent to `Scan[User]()`.

```go
metadata := sentinel.Scan[User]()
// User and all related types (Profile, Order, etc.) are now cached
```

### TryScan

```go
func TryScan[T any]() (Metadata, error)
```

Like `Scan`, but returns an error instead of panicking if `T` is not a struct type.

```go
metadata, err := sentinel.TryScan[User]()
if err != nil {
    // Handle non-struct type
}
```

### Tag

```go
func Tag(tagName string)
```

Registers a custom struct tag for extraction. Call before `Inspect` or `Scan`.

```go
sentinel.Tag("graphql")
sentinel.Tag("proto")
```

### Browse

```go
func Browse() []string
```

Returns all cached type FQDNs.

```go
fqdns := sentinel.Browse()
// ["github.com/you/app/models.User", "github.com/you/app/models.Profile"]
```

### Lookup

```go
func Lookup(fqdn string) (Metadata, bool)
```

Retrieves cached metadata by FQDN.

```go
meta, ok := sentinel.Lookup("github.com/you/app/models.User")
if ok {
    // Use meta
}

// Or use the FQDN from previously inspected metadata
userMeta := sentinel.Inspect[User]()
meta, ok = sentinel.Lookup(userMeta.FQDN)
```

### Schema

```go
func Schema() map[string]Metadata
```

Returns all cached metadata as a map, keyed by FQDN.

```go
schema := sentinel.Schema()
for fqdn, meta := range schema {
    fmt.Printf("%s: %d fields\n", fqdn, len(meta.Fields))
}
```

## Relationship Functions

### GetRelationships

```go
func GetRelationships[T any]() []TypeRelationship
```

Returns all types that `T` references.

```go
rels := sentinel.GetRelationships[User]()
// [{From: "github.com/.../models.User", To: "github.com/.../models.Profile", Kind: "reference", ...}]
```

### GetReferencedBy

```go
func GetReferencedBy[T any]() []TypeRelationship
```

Returns all types that reference `T`. Requires prior caching of those types.

```go
refs := sentinel.GetReferencedBy[Profile]()
// [{From: "github.com/.../models.User", To: "github.com/.../models.Profile", Kind: "reference", ...}]
```

## Types

See [Types Reference](2.types.md) for complete type documentation:

- [Metadata](2.types.md#metadata) — complete metadata for a struct type
- [FieldMetadata](2.types.md#fieldmetadata) — metadata for a single field
- [FieldKind](2.types.md#fieldkind) — field type categorization
- [TypeRelationship](2.types.md#typerelationship) — relationship between types
- [Relationship Kinds](2.types.md#relationship-kinds) — reference, collection, embedding, map
