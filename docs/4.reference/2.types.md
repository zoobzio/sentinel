# Type Reference

## ModelMetadata

Complete metadata for a struct type.

```go
type ModelMetadata struct {
    TypeName      string             `json:"type_name"`
    PackageName   string             `json:"package_name"`
    Fields        []FieldMetadata    `json:"fields"`
    Relationships []TypeRelationship `json:"relationships,omitempty"`
}
```

| Field | Type | Description |
|-------|------|-------------|
| `TypeName` | `string` | Short type name (e.g., `"User"`) |
| `PackageName` | `string` | Full package path (e.g., `"github.com/you/app/models"`) |
| `Fields` | `[]FieldMetadata` | All exported fields |
| `Relationships` | `[]TypeRelationship` | References to other struct types |

## FieldMetadata

Metadata for a single struct field.

```go
type FieldMetadata struct {
    Name string            `json:"name"`
    Type string            `json:"type"`
    Tags map[string]string `json:"tags,omitempty"`
}
```

| Field | Type | Description |
|-------|------|-------------|
| `Name` | `string` | Field name (e.g., `"Email"`) |
| `Type` | `string` | Go type as string (e.g., `"string"`, `"*Profile"`, `"[]Order"`) |
| `Tags` | `map[string]string` | All extracted struct tags |

### Tag Extraction

Only registered tags are extracted. Built-in tags:

- `json`, `db`, `validate`, `scope`, `encrypt`, `redact`, `desc`, `example`

Register custom tags with `sentinel.Tag(name)`.

## TypeRelationship

A relationship between two struct types.

```go
type TypeRelationship struct {
    From      string `json:"from"`
    To        string `json:"to"`
    Field     string `json:"field"`
    Kind      string `json:"kind"`
    ToPackage string `json:"to_package"`
}
```

| Field | Type | Description |
|-------|------|-------------|
| `From` | `string` | Source type name |
| `To` | `string` | Target type name |
| `Field` | `string` | Field that creates the relationship |
| `Kind` | `string` | Relationship kind (see below) |
| `ToPackage` | `string` | Target type's full package path |

### Relationship Kinds

```go
const (
    RelationshipReference  = "reference"  // *Profile, Profile
    RelationshipCollection = "collection" // []Order, [5]Order
    RelationshipEmbedding  = "embedding"  // Anonymous embedded struct
    RelationshipMap        = "map"        // map[string]Item
)
```

## JSON Serialization

All types have JSON tags for easy serialization:

```go
schema := sentinel.Schema()
data, _ := json.MarshalIndent(schema, "", "  ")
fmt.Println(string(data))
```

Output:

```json
{
  "User": {
    "type_name": "User",
    "package_name": "github.com/you/app/models",
    "fields": [
      {
        "name": "ID",
        "type": "string",
        "tags": {
          "json": "id",
          "db": "user_id"
        }
      }
    ],
    "relationships": [
      {
        "from": "User",
        "to": "Profile",
        "field": "Profile",
        "kind": "reference",
        "to_package": "github.com/you/app/models"
      }
    ]
  }
}
```
